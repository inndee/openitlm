var ServerUrl="http://devcola.com/public_data/loadxml.php";var LicenseStatus=[];function getArraySubObjects(a){if(a.constructor!=Array){var b=[];b.push(a);return b}else{return a}}function removeDuplicatesInArray(a){var b=a.filter(function(c,d){return a.indexOf(c)==d});return b}function getServerUrl(){var a=Math.round(Math.random()*10000);return ServerUrl+"?rand="+a}function epochToDate(c){c=parseFloat(c)*1000;var b="/Date("+c+")/";var a=new Date(parseFloat(b.substr(6)));return a.toLocaleString()}function capitaliseFirstLetter(a){return a.charAt(0).toUpperCase()+a.slice(1)}function parseXML(a){var b;if(window.DOMParser){parser=new DOMParser();b=parser.parseFromString(a,"text/xml");console.log("Verbose: parsing xml data.")}else{b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a)}return b}function convertToJson(b){var a=parseXML(b);return JSON.parse(xml2json(a,""))}function prepareDataListing(){if(LicenseStatus.length==0||LicenseStatus.realtime==null){ERROR("prepareDataForListing:Failed to prepare data LicenseStatus is empty");return false}var b=[];getArraySubObjects(LicenseStatus.realtime.vendorlicenses.vendorlicense).forEach(function(h){var f=0;var g=0;getArraySubObjects(h.daemons.daemon.features.feature).forEach(function(i){f+=parseInt(i.licenses);g+=parseInt(i.used)});h.totallicenses=f;h.inuse=g;h.html=formatHTMLProductItem(h);b.push(h)});LicenseStatus.realtime.productlist=b;var a=[];getArraySubObjects(LicenseStatus.realtime.vendorlicenses.vendorlicense).forEach(function(f){getArraySubObjects(f.daemons.daemon.features.feature).forEach(function(g){g.productname=f.name;g.daemon_name=f.daemons.daemon.name;g.daemon_status=f.daemons.daemon.status;g.daemon_version=f.daemons.daemon.version;g.html=formatHTMLFeatureItem(g);a.push(g)})});LicenseStatus.realtime.featureslist=a;var c=[];getArraySubObjects(a).forEach(function(f){if(f.online==null){return}getArraySubObjects(f.online.entry).forEach(function(g){g.productname=f.productname;g.featurename=f.name;c.push(g)})});var d=[];getArraySubObjects(c).forEach(function(f){d.push(f.user)});d=removeDuplicatesInArray(d);var e=[];getArraySubObjects(d).forEach(function(h){var g=[];getArraySubObjects(c).forEach(function(i){if(h==i.user){g.push(i)}});var f=formatHTMLUserItem(h,g);e.push({name:h,use:g,html:f})});LicenseStatus.realtime.userslist=e}function formatHTMLProductItem(a){var c="<h3>"+a.name+"</h3>";var g="";var f=parseInt((a.inuse/a.totallicenses)*100);if(f!=0){g="<hr align='left' width='"+f+"%' />"}var b="";b+="<p class='inline' >Total Licenses: "+a.totallicenses+"</p>   <p class='inline'>In Use Licenses: "+a.inuse+"</p>";var e="<br/><br/><br/><div class='meterbar'>"+g+"</div>";var d=c+b+e;return d}function formatHTMLFeatureItem(a){var c="<h3>"+a.name+" </h3>";var g="";var f=parseInt((a.used/a.licenses)*100);if(f!=0){g="<hr align='left' width='"+f+"%' />"}var b="";b+="<p>Version: "+a.version+"</p></br/><br/>";b+="<p>Product name: "+a.productname+"</p>";b+="<p>Expires: "+epochToDate(a.expires)+"</p>";b+="<h4 class='inline'>Total Licenses: "+a.licenses+"</h4>   <h4 class = 'inline'>In Use Licenses: "+a.used+"</h4>";var e="<br/><br/><div class='meterbar'>"+g+"</div>";var d=c+b+e;return d}function formatHTMLUserItem(e,d){var b="<h3>"+e+" </h3>";var a="<h4>Use licenses: "+d.length+"</h4>";var c=b+a;return c}function removeDuplicatesInArray(a){var b=a.filter(function(c,d){return a.indexOf(c)==d});return b};